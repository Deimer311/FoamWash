# ğŸ—‚ï¸ GUÃA DE RUTAS SEGÃšN TU ESTRUCTURA

## ğŸ“ Estructura de tu Proyecto

```
view/
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ estilos_cotizar.css
â”‚   â”œâ”€â”€ estilos_login.css
â”‚   â”œâ”€â”€ estilos_servicios_cliente.css
â”‚   â”œâ”€â”€ estilos_servicios.css
â”‚   â””â”€â”€ styles.css
â”‚
â”œâ”€â”€ img/
â”‚   â”œâ”€â”€ fondo.png
â”‚   â”œâ”€â”€ logo_empresa.jpg
â”‚   â”œâ”€â”€ serv_alfombras.jpg
â”‚   â”œâ”€â”€ serv_colchones.jpg
â”‚   â”œâ”€â”€ serv_cortinas.jpg
â”‚   â”œâ”€â”€ serv_desinfeccion.jpg
â”‚   â”œâ”€â”€ serv_lavado_muebles.jpg
â”‚   â””â”€â”€ serv_tapiceria_carro.jpg
â”‚
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ cotizar.js
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ login.js
â”‚   â”œâ”€â”€ servicios_cliente.js
â”‚   â”œâ”€â”€ servicios.js
â”‚   â””â”€â”€ sesiones_activas.js
â”‚
â”œâ”€â”€ index.html (LOGIN/REGISTRO)
â”œâ”€â”€ login.html
â”œâ”€â”€ servicios_cliente.html
â””â”€â”€ servicios.html
```

---

## ğŸ¯ RUTAS CORRECTAS EN login.js

### 1. FunciÃ³n `logout()`

```javascript
function logout() {
    const token = sessionStorage.getItem('authToken');
    const email = sessionStorage.getItem('userEmail');
    
    if (token) {
        eliminarSesionActiva(token);
    }
    
    sessionStorage.removeItem('authToken');
    sessionStorage.removeItem('userRole');
    sessionStorage.removeItem('userEmail');
    
    console.log('ğŸ‘‹ SesiÃ³n cerrada:', email);
    
    // âœ… CORRECTO - Redirige a index.html en la misma carpeta (view)
    window.location.href = './index.html';
}
```

### 2. FunciÃ³n `protectPage()`

```javascript
function protectPage(allowedRoles = []) {
    const session = checkActiveSession();
    
    if (!session.isActive) {
        alert('Debes iniciar sesiÃ³n para acceder a esta pÃ¡gina.');
        // âœ… CORRECTO - Redirige a index.html en la misma carpeta
        window.location.href = './index.html';
        return false;
    }
    
    if (allowedRoles.length > 0 && !allowedRoles.includes(session.role)) {
        alert('No tienes permisos para acceder a esta pÃ¡gina.');
        // âœ… CORRECTO - Redirige a index.html en la misma carpeta
        window.location.href = './index.html';
        return false;
    }
    
    return session;
}
```

### 3. Base de Datos `USERS_DB`

```javascript
const USERS_DB = {
    "admin@gmail.com": { 
        password: "123456", 
        role: "admin", 
        token: "token-admin-12345", 
        // Si tienes carpeta admin dentro de view:
        redirect: "./admin/dashboard.html"
        // Si NO tienes carpeta admin, crear una pÃ¡gina en view:
        // redirect: "./admin_dashboard.html"
    },
    "trabajador@gmail.com": { 
        password: "123456", 
        role: "trabajador", 
        token: "token-trabajador-67890", 
        // Si tienes carpeta trabajador dentro de view:
        redirect: "./trabajador/tareas.html"
        // Si NO, crear en view:
        // redirect: "./trabajador_tareas.html"
    },
    "cliente@gmail.com": { 
        password: "123456", 
        role: "cliente", 
        token: "token-cliente-abcde", 
        // âœ… CORRECTO - servicios_cliente.html estÃ¡ en view
        redirect: "./servicios_cliente.html" 
    }
};
```

---

## ğŸ“ RUTAS EN servicios_cliente.html

Tu `servicios_cliente.html` estÃ¡ en la carpeta `view/`, asÃ­ que:

```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Servicios - FoamWash</title>
    
    <!-- âœ… CSS en subcarpeta css/ -->
    <link rel="stylesheet" href="./css/estilos_servicios_cliente.css">
</head>
<body>
    <!-- Tu contenido aquÃ­ -->
    
    <!-- âœ… Scripts en subcarpeta js/ -->
    <script src="./js/login.js"></script>
    <script src="./js/sesiones_activas.js"></script>
    
    <script>
        // ProtecciÃ³n de pÃ¡gina
        const session = protectPage(['cliente']);
        
        if (session && session.email) {
            document.getElementById('userEmail').textContent = `ğŸ‘¤ ${session.email}`;
        }
        
        function cerrarSesionCliente(e) {
            e.preventDefault();
            if (confirm('Â¿Deseas cerrar sesiÃ³n?')) {
                if (typeof mostrarNotificacion === 'function') {
                    mostrarNotificacion('Cerrando sesiÃ³n...');
                }
                setTimeout(() => logout(), 1000);
            }
        }
    </script>
    
    <script src="./js/servicios_cliente.js"></script>
</body>
</html>
```

---

## ğŸ–¼ï¸ RUTAS DE IMÃGENES

En `servicios_cliente.html`, las imÃ¡genes deben apuntar a:

```html
<!-- âœ… CORRECTO - ImÃ¡genes en subcarpeta img/ -->
<img src="./img/serv_lavado_muebles.jpg" alt="Lavado de muebles">
<img src="./img/serv_alfombras.jpg" alt="Lavado de alfombras">
<img src="./img/serv_tapiceria_carro.jpg" alt="TapicerÃ­a de carros">
<img src="./img/serv_cortinas.jpg" alt="Lavado de cortinas">
<img src="./img/serv_colchones.jpg" alt="Lavado de colchones">
<img src="./img/serv_desinfeccion.jpg" alt="DesinfecciÃ³n">
```

---

## ğŸ¨ RUTAS DE CSS

En todos tus archivos HTML dentro de `view/`:

```html
<!-- index.html o login.html -->
<link rel="stylesheet" href="./css/estilos_login.css">

<!-- servicios_cliente.html -->
<link rel="stylesheet" href="./css/estilos_servicios_cliente.css">

<!-- servicios.html -->
<link rel="stylesheet" href="./css/estilos_servicios.css">

<!-- cotizar.html (si existe) -->
<link rel="stylesheet" href="./css/estilos_cotizar.css">
```

---

## ğŸ’» RUTAS DE SCRIPTS

En todos tus archivos HTML dentro de `view/`:

```html
<!-- Scripts de autenticaciÃ³n (en pÃ¡ginas protegidas) -->
<script src="./js/login.js"></script>
<script src="./js/sesiones_activas.js"></script>

<!-- Scripts especÃ­ficos segÃºn la pÃ¡gina -->
<script src="./js/servicios_cliente.js"></script>
<script src="./js/servicios.js"></script>
<script src="./js/cotizar.js"></script>
<script src="./js/index.js"></script>
```

---

## ğŸ”„ TABLA RESUMEN DE RUTAS

| Desde | Hacia | Ruta Correcta |
|-------|-------|---------------|
| `servicios_cliente.html` | `index.html` (login) | `./index.html` |
| `servicios_cliente.html` | CSS | `./css/estilos_servicios_cliente.css` |
| `servicios_cliente.html` | JS | `./js/servicios_cliente.js` |
| `servicios_cliente.html` | ImÃ¡genes | `./img/nombre_imagen.jpg` |
| `index.html` | `servicios_cliente.html` | `./servicios_cliente.html` |
| Cualquier HTML | Cerrar sesiÃ³n | `./index.html` |

---

## âœ… VERIFICACIÃ“N RÃPIDA

### Checklist de Rutas:

- [ ] `logout()` redirige a `./index.html` âœ…
- [ ] `protectPage()` redirige a `./index.html` âœ…
- [ ] CSS carga desde `./css/` âœ…
- [ ] JS carga desde `./js/` âœ…
- [ ] ImÃ¡genes cargan desde `./img/` âœ…
- [ ] Login redirige a `./servicios_cliente.html` âœ…

---

## ğŸš¨ ERRORES COMUNES A EVITAR

âŒ **INCORRECTO:**
```javascript
window.location.href = '../index.html';  // NO - Busca en carpeta padre
window.location.href = '/index.html';     // NO - Busca en raÃ­z del servidor
window.location.href = 'index.html';      // FUNCIONA pero mejor usar ./
```

âœ… **CORRECTO:**
```javascript
window.location.href = './index.html';    // SÃ - Carpeta actual (view/)
```

---

## ğŸ“‚ SI TIENES SUBCARPETAS (Admin/Trabajador)

Si creas carpetas `admin/` y `trabajador/` dentro de `view/`:

```
view/
â”œâ”€â”€ admin/
â”‚   â””â”€â”€ dashboard.html
â”œâ”€â”€ trabajador/
â”‚   â””â”€â”€ tareas.html
â”œâ”€â”€ css/
â”œâ”€â”€ img/
â”œâ”€â”€ js/
â”œâ”€â”€ index.html
â”œâ”€â”€ servicios_cliente.html
â””â”€â”€ ...
```

Entonces en `admin/dashboard.html`:

```html
<!-- admin/dashboard.html -->
<head>
    <!-- âŒ INCORRECTO -->
    <link rel="stylesheet" href="./css/estilos_admin.css">
    
    <!-- âœ… CORRECTO -->
    <link rel="stylesheet" href="../css/estilos_admin.css">
</head>
<body>
    <!-- Scripts -->
    <script src="../js/login.js"></script>
    <script src="../js/sesiones_activas.js"></script>
    
    <script>
        // Proteger pÃ¡gina de admin
        const session = protectPage(['admin']);
        
        // Cerrar sesiÃ³n debe volver a view/index.html
        function cerrarSesionAdmin() {
            if (confirm('Â¿Cerrar sesiÃ³n?')) {
                // Modificar temporalmente la ruta
                sessionStorage.setItem('logoutRedirect', '../index.html');
                logout();
            }
        }
    </script>
</body>
```

Y modificar `logout()` para soportar subcarpetas:

```javascript
function logout() {
    const token = sessionStorage.getItem('authToken');
    const email = sessionStorage.getItem('userEmail');
    
    if (token) {
        eliminarSesionActiva(token);
    }
    
    sessionStorage.removeItem('authToken');
    sessionStorage.removeItem('userRole');
    sessionStorage.removeItem('userEmail');
    
    // Verificar si hay una ruta personalizada
    const customRedirect = sessionStorage.getItem('logoutRedirect');
    sessionStorage.removeItem('logoutRedirect');
    
    console.log('ğŸ‘‹ SesiÃ³n cerrada:', email);
    
    // Redirigir
    window.location.href = customRedirect || './index.html';
}
```

---

## ğŸ‰ RESUMEN

Para tu estructura actual donde **todo estÃ¡ en `view/`**:

1. âœ… Usa `./` para archivos en la misma carpeta
2. âœ… Usa `./css/` para archivos en subcarpeta css
3. âœ… Usa `./js/` para archivos en subcarpeta js
4. âœ… Usa `./img/` para archivos en subcarpeta img
5. âœ… `logout()` redirige a `./index.html`
6. âœ… `protectPage()` redirige a `./index.html`

**Â¡Todo listo!** ğŸš€